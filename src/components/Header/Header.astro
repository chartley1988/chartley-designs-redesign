---
import style from "./Header.module.css";
import DesktopNav from "./DesktopNav/DesktopNav.astro";
import ContactButton from "./ContactButton.astro";
import MobileNav from "./MobileNav/MobileNav.astro";

import { getCollection, getEntry } from 'astro:content';
const content = await getCollection('services');

interface Props {
	siteName: string;
	showSiteName?: boolean;
	logo?: string | undefined;
}

const { siteName, logo, showSiteName = true } = Astro.props;

type menuOptionsType = {
	title: string;
	path: string;
	badge?: true;
	children?: menuOptionsType[];
};

const menuOptions: menuOptionsType[] = [
	{
		title: "Home",
		path: "/",
	},
	{
		title: 'Blog',
		path: `/blog?page=1`
	},
	{
		title: "Services",
		path: "/",
		children: content.map(entry => {
			return {
				title: entry.data.title,
				path: `/services/${entry.data.title.toLowerCase()}`,
			}
		})
	},
	{
		title: "About",
		path: "/",
		children: [
			{
				title: "About Us",
				path: "/",
			},
			{
				title: "Contact Us",
				path: "/",
			},
		],
	},
];
---

<header class={style.container}>
	<div class={style.letterhead}>
		{
			logo != undefined && (
				<>
					<img
						src={logo}
						alt=''
					/>
					{showSiteName && <div>{siteName}</div>}
				</>
			)
		}
		{logo == undefined && <div>{siteName}</div>}
	</div>
	<DesktopNav menuOptions={menuOptions} />
	<ContactButton />
	<MobileNav menuOptions={menuOptions} />
</header>
